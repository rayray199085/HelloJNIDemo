# HelloJNIDemo

This project shows how to use jni to connect java and c with ndk on Intellij IDEA.

Step1. Create an Android project

Step2. Create a native method

Step3. Create a file named 'jni' under the project file.

Step4. Create a file whose name in such a format 'xxxx.c' and define a method.
Step4.1 The method name should be (return value type) + Java_packageName_className_nativeMethodName(JNIEnv* env, jobject thiz)
        For example: jstring Java_com_example_stephencao_hellojnidemo_MainActivity_stringFromJNI(JNIEnv* env, jobject thiz)
        
Step4.2 Add #include<jni.h> in the c file

step4.3 Use javac HelloJNI.java to generate HelloJNI.class first

step4.4 Then, use javac HelloJNI.java -h . to generate .h file

Step5. Create a Android.mk file with setting information:

                  LOCAL_PATH := $(call my-dir)
                  
                    include $(CLEAR_VARS)
                    
                    LOCAL_MODULE    := hello    //target name ----> libhello.so
                    
                    LOCAL_SRC_FILES := hello.c // c file name
                    
                    include $(BUILD_SHARED_LIBRARY)
                    
Step6. In terminal, use ndk-build to generate .so files.

Step7. Create a file named 'jniLibs' under the main file, and copy all the files which were generated by 

       calling ndk-build in Libs to 'jniLibbs'. Otherwise, it will appear such an error: java.lang.UnsatisfiedLinkError:
       
       Couldn't load hello: findLibrary returned null...
       
       jniLibs should place in such a structure:
       |--Project Name
                      |--app
                            |--src
                                  |--main
                                         |--jniLibs
                                           
                                         
